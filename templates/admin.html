<!DOCTYPE html>
<html lang='ar' dir='rtl'>
<head>
<meta charset='UTF-8'>
<title>لوحة إدارة فراس</title>
<link href='https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap' rel='stylesheet'>
<style>
body{font-family:'Cairo',sans-serif;background:#f2f2f2;margin:0;padding:20px}
h1{text-align:center}
.section{background:#fff;padding:15px;margin-top:20px;border-radius:10px}
textarea,select,button{width:100%;margin-top:10px;padding:10px;border-radius:8px;border:1px solid #ccc}
button{background:#198754;color:#fff;border:none;cursor:pointer}
.item{padding:10px;border-bottom:1px solid #ddd}
</style>
</head>
<body>

<h1>لوحة إدارة فراس</h1>

<div class='section'>
<h3>إضافة معلومة</h3>
<textarea id='info'></textarea>
<select id='cat'>
<option value='دوام'>دوام</option>
<option value='تواصل'>تواصل</option>
<option value='مواقع'>مواقع</option>
<option value='عام'>عام</option>
</select>
<button onclick='addInfo()'>حفظ</button>
</div>

<div class='section'>
<h3>المعلومات</h3>
<div id='infos'></div>
</div>

<div class='section'>
<h3>الأسئلة المحولة للدعم</h3>
<div id='forwarded'></div>
</div>

<script>
fetch('/admin/data').then(r=>r.json()).then(data=>{
  const i=document.getElementById('infos');
  data.infos.forEach(o=>{
    const d=document.createElement('div');
    d.className='item';
    d.innerText='['+o.category+'] '+o.text;
    i.appendChild(d);
  });

  const f=document.getElementById('forwarded');
  data.forwarded.forEach(q=>{
    const d=document.createElement('div');
    d.className='item';
    d.innerText=q;
    f.appendChild(d);
  });
});

function addInfo(){
  fetch('/admin/add_info',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      text:document.getElementById('info').value,
      category:document.getElementById('cat').value
    })
  }).then(()=>location.reload());
}
</script>

</body>
</html>
