<!DOCTYPE html>
<html lang='ar' dir='rtl'>
<head>
<meta charset='UTF-8'>
<title>لوحة إدارة فراس</title>
<link href='https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap' rel='stylesheet'>
<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Cairo',sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  min-height:100vh;
  padding:30px
}
.container{
  max-width:1100px;
  margin:auto
}
.header{
  background:linear-gradient(135deg,#0d6efd,#0b5ed7);
  color:#fff;
  padding:22px;
  border-radius:18px;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,.25)
}
.header h1{margin:0;font-size:22px}
.section{
  background:#fff;
  margin-top:25px;
  border-radius:18px;
  padding:20px;
  box-shadow:0 20px 40px rgba(0,0,0,.15)
}
.section h3{
  margin-top:0;
  border-bottom:1px solid #eee;
  padding-bottom:10px
}
textarea,select,button{
  width:100%;
  margin-top:12px;
  padding:12px 14px;
  border-radius:12px;
  border:1px solid #ccc;
  font-family:'Cairo',sans-serif
}
button{
  background:#0d6efd;
  color:#fff;
  border:none;
  font-weight:600;
  cursor:pointer
}
button:hover{background:#0b5ed7}
.list .item{
  background:#f4f6f9;
  border-radius:12px;
  padding:14px;
  margin-top:10px;
  font-size:14px
}
.tag{
  display:inline-block;
  background:#0d6efd;
  color:#fff;
  padding:2px 8px;
  border-radius:8px;
  font-size:11px;
  margin-left:6px
}
.footer{
  text-align:center;
  color:#fff;
  margin-top:30px;
  font-size:12px;
  opacity:.8
}
</style>
</head>
<body>

<div class='container'>

  <div class='header'>
    <h1>لوحة إدارة المساعد الذكي فراس</h1>
  </div>

  <div class='section'>
    <h3>إضافة معلومة جديدة</h3>
    <textarea id='info' placeholder='اكتب المعلومة هنا'></textarea>
    <select id='cat'>
      <option value='دوام'>دوام</option>
      <option value='تواصل'>تواصل</option>
      <option value='مواقع'>مواقع</option>
      <option value='عام'>عام</option>
    </select>
    <button onclick='addInfo()'>حفظ المعلومة</button>
  </div>

  <div class='section'>
    <h3>المعلومات الحالية</h3>
    <div id='infos' class='list'></div>
  </div>

  <div class='section'>
    <h3>الأسئلة المحولة للدعم</h3>
    <div id='forwarded' class='list'></div>
  </div>

  <div class='footer'>
    Firas Bot – Admin Panel
  </div>

</div>

<script>
fetch('/admin/data').then(r=>r.json()).then(data=>{
  const infos=document.getElementById('infos')
  data.infos.forEach(i=>{
    const d=document.createElement('div')
    d.className='item'
    d.innerHTML='<span class=\"tag\">'+i.category+'</span>'+i.text
    infos.appendChild(d)
  })

  const f=document.getElementById('forwarded')
  data.forwarded.forEach(q=>{
    const d=document.createElement('div')
    d.className='item'
    d.innerText=q
    f.appendChild(d)
  })
})

function addInfo(){
  fetch('/admin/add_info',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      text:document.getElementById('info').value,
      category:document.getElementById('cat').value
    })
  }).then(()=>location.reload())
}
</script>

</body>
</html>
