<!DOCTYPE html>
<html lang='ar' dir='rtl'>
<head>
<meta charset='UTF-8'>
<title>لوحة إدارة فراس</title>
<link href='https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap' rel='stylesheet'>
<link rel='stylesheet' href='/static/theme.css'>
<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Cairo',sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  min-height:100vh;
  padding:30px;
  color:var(--text)
}
.container{max-width:1100px;margin:auto}
.header{
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  color:#fff;
  padding:22px;
  border-radius:var(--radius);
  text-align:center;
  box-shadow:var(--shadow)
}
.section{
  background:var(--card);
  margin-top:25px;
  border-radius:var(--radius);
  padding:20px;
  box-shadow:var(--shadow)
}
textarea,select,button{
  width:100%;
  margin-top:12px;
  padding:12px 14px;
  border-radius:12px;
  border:1px solid #ccc;
  font-family:'Cairo',sans-serif
}
button{
  background:var(--primary);
  color:#fff;
  border:none;
  font-weight:600;
  cursor:pointer
}
button:hover{background:var(--primary-dark)}
.item{
  background:var(--bg);
  border-radius:12px;
  padding:14px;
  margin-top:10px;
  font-size:14px
}
.tag{
  display:inline-block;
  background:var(--primary);
  color:#fff;
  padding:2px 10px;
  border-radius:10px;
  font-size:11px;
  margin-left:8px
}
.footer{
  text-align:center;
  color:#fff;
  margin-top:30px;
  font-size:12px;
  opacity:.85
}
</style>
</head>
<body>

<div class='container'>

<div class='header'>
  <h1>لوحة إدارة المساعد الذكي فراس</h1>
</div>

<div class='section'>
  <h3>إضافة معلومة</h3>
  <textarea id='info'></textarea>
  <select id='cat'>
    <option value='دوام'>دوام</option>
    <option value='تواصل'>تواصل</option>
    <option value='مواقع'>مواقع</option>
    <option value='عام'>عام</option>
  </select>
  <button onclick='addInfo()'>حفظ</button>
</div>

<div class='section'>
  <h3>المعلومات</h3>
  <div id='infos'></div>
</div>

<div class='section'>
  <h3>محول للدعم</h3>
  <div id='forwarded'></div>
</div>

<div class='footer'>Firas Intelligent Assistant</div>

</div>

<script>
fetch('/admin/data').then(r=>r.json()).then(d=>{
  const i=document.getElementById('infos')
  d.infos.forEach(x=>{
    const e=document.createElement('div')
    e.className='item'
    e.innerHTML='<span class=\"tag\">'+x.category+'</span>'+x.text
    i.appendChild(e)
  })
  const f=document.getElementById('forwarded')
  d.forwarded.forEach(q=>{
    const e=document.createElement('div')
    e.className='item'
    e.innerText=q
    f.appendChild(e)
  })
})
function addInfo(){
  fetch('/admin/add_info',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      text:document.getElementById('info').value,
      category:document.getElementById('cat').value
    })
  }).then(()=>location.reload())
}
</script>

</body>
</html>
